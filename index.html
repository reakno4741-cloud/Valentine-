<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
<title>Will You Be My Valentine?</title>

<style>
:root {
  --bg-color: #ff4d6d;
  --card-bg: rgba(255, 117, 143, 0.92);
  --ink: #ffffff;
  --shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
}

* { box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

html,body{
  height:100%;
  width:100%;
  overflow:hidden;
  margin:0;
  font-family:"Plus Jakarta Sans", system-ui, sans-serif;
}

body{
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--ink);
}

/* ================= BACKGROUND GIF ================= */
.background-gif{
  position:fixed;
  inset:0;
  z-index:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter: brightness(0.7);
  transform: scale(0.9); /* Zoom out slightly to show teddy face */
  transform-origin: center center;
}

/* ================= FLOATING EMOJIS ================= */
.float-layer{
  pointer-events:none;
  position:absolute;
  inset:0;
  z-index:1;
}

.float{
  position:absolute;
  font-size:22px;
  opacity:0;
  animation:drift var(--dur) linear infinite;
}

@keyframes drift{
  0%{
    transform:translateY(-20vh) translateX(0) rotate(0deg);
    opacity:0;
  }
  10%{ opacity:0.8; }
  90%{ opacity:0.8; }
  100%{
    transform:translateY(110vh) translateX(var(--tx)) rotate(360deg);
    opacity:0;
  }
}

/* ================= CARD ================= */
.scene{
  position:relative;
  height:100%;
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
  z-index:2;
}

.card{
  position:relative;
  z-index:2;
  width:100%;
  max-width:400px;
  border-radius:24px;
  padding:32px 24px;
  background:var(--card-bg);
  box-shadow:var(--shadow);
  text-align:center;
  border:2px solid rgba(255,255,255,0.4);
  backdrop-filter:blur(10px);
  animation:glowCard 3s ease-in-out infinite alternate;
}

@keyframes glowCard{
  from{ box-shadow:0 0 20px rgba(255,255,255,0.3); }
  to{ box-shadow:0 0 45px rgba(255,255,255,0.7); }
}

h1{
  font-weight:800;
  font-size:clamp(28px,8vw,36px);
  margin-bottom:24px;
  line-height:1.2;
}

.cta{
  display:flex;
  gap:12px;
  justify-content:center;
  margin-top:24px;
}

.btn{
  border:0;
  cursor:pointer;
  border-radius:999px;
  font-weight:800;
  padding:14px 22px;
  font-size:18px;
  transition:0.2s;
  min-width:120px;
}

.btn-primary{
  background:#ffffff;
  color:#ff4d6d;
}

.btn-ghost{
  background:#8b0000;
  color:white;
  border:2px solid #ffffff;
}

.yes-mode{
  display:none;
  animation:popIn 0.6s ease both;
}

@keyframes popIn{
  0%{ transform:scale(0.8); opacity:0; }
  100%{ transform:scale(1); opacity:1; }
}

.meme-container{
  width:100%;
  margin:20px 0;
  border-radius:16px;
  overflow:hidden;
  background:rgba(255,255,255,0.1);
}

.meme-container img{
  width:100%;
}

.love-line{
  margin-top:18px;
  font-size:18px;
  font-weight:600;
  opacity:0;
  animation:fadeSlide 2s ease forwards;
  animation-delay:0.8s;
}

@keyframes fadeSlide{
  0%{ opacity:0; transform:translateY(20px); }
  100%{ opacity:1; transform:translateY(0); }
}

#noBtn{
  transition:0.15s ease;
  position:relative;
}
</style>
</head>

<body>

<div class="scene">

  <!-- BACKGROUND GIF (zoomed out to show teddy face) -->
  <img class="background-gif" src="https://media.giphy.com/media/rT7WPCciy8oETxLmUV/giphy.gif" alt="Romantic Background">

  <!-- FLOATING EMOJIS -->
  <div class="float-layer" id="floatLayer"></div>

  <!-- MAIN CARD -->
  <div class="card" id="card">
    <div id="askMode">
      <h1 id="valentineText">Will you be my valentine?</h1>
      <div class="cta">
        <button class="btn btn-primary" id="yesBtn">Yes! üíñ</button>
        <button class="btn btn-ghost" id="noBtn">No üíî</button>
      </div>
    </div>

    <div class="yes-mode" id="yesMode">
      <h1>Yayyy! I Love You! ‚ù§Ô∏è</h1>
      <div class="meme-container">
        <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" alt="Love Meme">
      </div>
      <div class="love-line">
        You're my everything now ‚ô°
      </div>
    </div>
  </div>

</div>

<script>
/* ===== ORIGINAL MUSIC & FLOATIES SYSTEM KEPT ===== */
const noSounds = [
"https://reakno4741-cloud.github.io/Valentine-/nooo.mp3",
"https://reakno4741-cloud.github.io/Valentine-/achaji.mp3",
"https://reakno4741-cloud.github.io/Valentine-/sadviolin.mp3",
"https://reakno4741-cloud.github.io/Valentine-/Khatam.mp3",
"https://reakno4741-cloud.github.io/Valentine-/emotional.mp3",
"https://reakno4741-cloud.github.io/Valentine-/sadmeow.mp3",
"https://reakno4741-cloud.github.io/Valentine-/music.mp3"
];

let currentNoAudio = null;
let currentSoundIndex = 0;

const floatLayer = document.getElementById('floatLayer');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const card = document.getElementById('card');
const askMode = document.getElementById('askMode');
const yesMode = document.getElementById('yesMode');
const valentineText = document.getElementById('valentineText');

const FLOATIES = ['üíñ','üåπ','üß∏','üíù','üíó','‚ú®','üíï'];

const params = new URLSearchParams(window.location.search);
const nameFromUrl = params.get("name");
if(nameFromUrl){
 const formattedName = decodeURIComponent(nameFromUrl);
 const finalName = formattedName.charAt(0).toUpperCase()+formattedName.slice(1);
 valentineText.innerText=`Hey ${finalName}, will you be my valentine?`;
}

function spawnFloaties(){
 for(let i=0;i<40;i++){
  const el=document.createElement('div');
  el.className='float';
  el.textContent=FLOATIES[Math.floor(Math.random()*FLOATIES.length)];
  el.style.left=Math.random()*100+'%';
  el.style.setProperty('--dur',(Math.random()*4+4)+'s');
  el.style.setProperty('--tx',(Math.random()*100-50)+'px');
  el.style.animationDelay=(Math.random()*8)+'s';
  floatLayer.appendChild(el);
 }
}

yesBtn.onclick=()=>{
   stopCurrentNoSound();
   askMode.style.display='none';
   yesMode.style.display='block';

   const audio=new Audio("https://reakno4741-cloud.github.io/Valentine-/Ishq_Wala_Love.mp3");
   audio.play().catch(()=>{});
};

function moveNoButton(){
 const cardRect = card.getBoundingClientRect();
 const btnWidth = noBtn.offsetWidth;
 const btnHeight = noBtn.offsetHeight;
 const maxX = cardRect.width - btnWidth - 10;
 const maxY = cardRect.height - btnHeight - 10;
 noBtn.style.position="absolute";
 noBtn.style.left=Math.random()*maxX+"px";
 noBtn.style.top=Math.random()*maxY+"px";
}

function stopCurrentNoSound() {
  if (currentNoAudio) {
    currentNoAudio.pause();
    currentNoAudio.currentTime = 0;
    currentNoAudio = null;
  }
}

noBtn.onclick=(e)=>{
 e.preventDefault();
 stopCurrentNoSound();

 const soundUrl = noSounds[currentSoundIndex];
 currentNoAudio = new Audio(soundUrl);
 currentNoAudio.play().catch(()=>{});

 currentSoundIndex = (currentSoundIndex + 1) % noSounds.length;
 moveNoButton();
};

spawnFloaties();
</script>
</body>
</html>
